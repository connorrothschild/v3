<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>How (and Why) to Add a Chart to Your D3.js Tooltip | Connor Rothschild</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="site"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="site"><meta data-n-head="ssr" data-hid="description" name="description" content="A few lines of code can make your D3 tooltips significantly more informative"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://v3.connorrothschild.com/post/adding-a-chart-to-your-d3-tooltip"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="How (and Why) to Add a Chart to Your D3.js Tooltip"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="A few lines of code can make your D3 tooltips significantly more informative"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://v3.connorrothschild.com/post/adding-a-chart-to-your-d3-tooltip/header.png"><meta data-n-head="ssr" data-hid="twitter:url" name="twitter:url" content="https://v3.connorrothschild.com/post/adding-a-chart-to-your-d3-tooltip"><meta data-n-head="ssr" data-hid="twitter:title" name="twitter:title" content="How (and Why) to Add a Chart to Your D3.js Tooltip"><meta data-n-head="ssr" data-hid="twitter:description" name="twitter:description" content="A few lines of code can make your D3 tooltips significantly more informative"><meta data-n-head="ssr" data-hid="twitter:image" name="twitter:image" content="https://v3.connorrothschild.com/post/adding-a-chart-to-your-d3-tooltip/header.png"><meta data-n-head="ssr" data-hid="twitter:site" name="twitter:site" content="@CL_Rothschild"><meta data-n-head="ssr" data-hid="twitter:card" name="twitter:card" content="summary_large_image"><meta data-n-head="ssr" property="article:published_time" content="2021-12-16T21:41:20.717Z"><meta data-n-head="ssr" property="article:modified_time" content="2021-12-16T21:41:20.717Z"><meta data-n-head="ssr" name="twitter:label1" content="Written by"><meta data-n-head="ssr" name="twitter:data1" content="Connor Rothschild"><base href="/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.png"><link data-n-head="ssr" data-hid="shortcut-icon" rel="shortcut icon" href="/_nuxt/icons/icon_64x64.ecd1ba.png"><link data-n-head="ssr" data-hid="apple-touch-icon" rel="apple-touch-icon" href="/_nuxt/icons/icon_512x512.ecd1ba.png" sizes="512x512"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.d23946e6.json" data-hid="manifest"><link data-n-head="ssr" data-hid="canonical" rel="canonical" href="https://v3.connorrothschild.com/post/adding-a-chart-to-your-d3-tooltip"><link rel="preload" href="/_nuxt/64b5898.js" as="script"><link rel="preload" href="/_nuxt/cbfb02f.js" as="script"><link rel="preload" href="/_nuxt/css/0e51f67.css" as="style"><link rel="preload" href="/_nuxt/7e4b2d1.js" as="script"><link rel="preload" href="/_nuxt/css/2510a47.css" as="style"><link rel="preload" href="/_nuxt/2bd4311.js" as="script"><link rel="preload" href="/_nuxt/css/2d74e3a.css" as="style"><link rel="preload" href="/_nuxt/c4401d5.js" as="script"><link rel="preload" href="/_nuxt/2c17e43.js" as="script"><link rel="preload" href="/_nuxt/css/ff4f90e.css" as="style"><link rel="preload" href="/_nuxt/e8925e5.js" as="script"><link rel="preload" href="/_nuxt/css/2cc613b.css" as="style"><link rel="preload" href="/_nuxt/ea1b2ed.js" as="script"><link rel="preload" href="/_nuxt/css/71314a7.css" as="style"><link rel="preload" href="/_nuxt/0dd4b09.js" as="script"><link rel="stylesheet" href="/_nuxt/css/0e51f67.css"><link rel="stylesheet" href="/_nuxt/css/2510a47.css"><link rel="stylesheet" href="/_nuxt/css/2d74e3a.css"><link rel="stylesheet" href="/_nuxt/css/ff4f90e.css"><link rel="stylesheet" href="/_nuxt/css/2cc613b.css"><link rel="stylesheet" href="/_nuxt/css/71314a7.css"><link rel="preload" href="/_nuxt/static/1639691221/post/adding-a-chart-to-your-d3-tooltip/state.js" as="script"><link rel="preload" href="/_nuxt/static/1639691221/post/adding-a-chart-to-your-d3-tooltip/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1639691221/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="theme-primary-off"><nav role="navigation" aria-label="main navigation" class="navbar theme-primary" data-v-577d5465><div class="navbar-brand" data-v-577d5465><a href="/" class="navbar-item has-text-weight-boldest nuxt-link-active" data-v-577d5465>Connor Rothschild
    </a> <a role="button" aria-label="menu" aria-expanded="false" data-target="navbarID" class="navbar-burger" data-v-577d5465><span aria-hidden="true" data-v-577d5465></span> <span aria-hidden="true" data-v-577d5465></span> <span aria-hidden="true" data-v-577d5465></span></a></div> <div id="navbarID" class="navbar-menu" data-v-577d5465><div class="navbar-end" data-v-577d5465><div class="navbar-item" data-v-577d5465><div class="themepicker__btn" data-v-15133967 data-v-577d5465><span class="themepicker__palette" data-v-15133967><span class="themepicker__swatch themepicker__swatch--primary" data-v-15133967></span> <span class="themepicker__swatch themepicker__swatch--secondary" data-v-15133967></span> <span class="themepicker__swatch themepicker__swatch--text" data-v-15133967></span></span></div></div> <a href="/#projects" class="navbar-item" data-v-577d5465>
        Projects
      </a> <a href="/#awards" class="navbar-item" data-v-577d5465>
        Awards
      </a> <a href="/#blog" class="navbar-item" data-v-577d5465>
        Blog
      </a> <a href="mailto:connor@connorrothschild.com" class="navbar-item" data-v-577d5465>
        Email
      </a> <a href="https://docs.google.com/document/d/1qBH-wNMe2nv9Xa4uzHZ5wBevohwKuB3h2i9M2yk4POk/edit?usp=sharing" target="_blank" rel="noopener" class="navbar-item" data-v-577d5465>
        Resume
      </a></div></div></nav> <article class="section container is-max-tablet"><h1 class="my-3 has-text-weight-boldest content-title is-size-3-mobile">
      How (and Why) to Add a Chart to Your D3.js Tooltip
    </h1> <p class="my-3 content-description is-size-5-mobile">
      A few lines of code can make your D3 tooltips significantly more informative
    </p> <p class="heading is-size-6 has-text-weight-light">
      June 2020 â€¢
      <span>10 minute read
  <!----></span></p> <hr> <div class="nuxt-content"><p>I think tooltips are one of the most underrated parts of a visualization. When users are initially confused by a visualization, they often hover over a data point of interest to get more information.</p>
<p>Unfortunately, many tooltips fail to really illuminate much about our data. They often recapitulate what is already being presented without clarifying any of the confusing parts of the data. Most frequently, I see (and even create ðŸ˜¦) tooltips which present the most basic information (in a map, a tooltip would present the state name and the value of interest), and nothing else!</p>
<p>Of course, there's nothing <em>wrong</em> with these kinds of tooltips. But they are truly doing the bare minimum, and, as a result, they're missing out on the full potential of tooltips. <strong>If users are actively seeking more information by hovering over data, we ought to reward them with the most helpful and interesting information we can.</strong></p>
<p>That's why I recently updated one of my tooltips from a static presentation of textual information to a line chart depicting change over time. In other words, I went from this:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/b1ffbe0.gif" alt="A GIF depicting the old tooltip, which contained static values in textual form" data-v-bbcfffec></div>
<p>to this:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/43e587c.gif" alt="A GIF depicting the old tooltip, which contained dynamic, temporal data over time for a given state upon hover" data-v-bbcfffec></div>
<h2 id="why-did-i-make-that-change"><a href="#why-did-i-make-that-change" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Why did I make that change?</h2>
<p>The former tooltip provided information which was rather uninteresting. Although it clarified the exact <em>rate</em> of overdose deaths in a given state at a given time, it didn't do much else. It did provide the year currently in view, but this was also visible in the bottom right corner of the visualization! It also provided the state name, but most of my viewers have likely taken US geography in middle school.</p>
<p>Thus, this tooltip was rather redundant. At best, it provided the <em>exact</em> rate, so that a viewer could compare two states, or learn more information about a given state without solely relying on color encoding (<a href="https://courses.cs.washington.edu/courses/cse442/17au/lectures/CSE442-VisualEncoding.pdf" rel="nofollow noopener noreferrer" target="_blank">which can be somewhat unreliable when it comes to quantitative encoding</a>, as is the case in a choropleth map).</p>
<p>The new tooltip shows a trend over time. It also shows the state name (just in case you skipped that day in US geography!), and also the most recent data on overdose deaths. Because this map is meant to show how the opioid crisis <em>has evolved</em>, showing a line chart for each state in my tooltip allows the user to explore state-by-state trends on hover! This is much easier than hovering on each state during each year and trying to keep track of the trends.</p>
<p>For example, hovering on West Virginia, which in 2017 seemed to have the highest opioid-involved overdose death rate (as indicated by it having the darkest shade of red), reveals that its also experienced one of the largest over-time increase in this rate since 1999:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/cc80f87.jpg" alt="A static image focusing on West Virginia, showcasing the tooltip which shows a line chart increasing over time." data-v-bbcfffec></div>
<h2 id="so-how-do-you-do-it"><a href="#so-how-do-you-do-it" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>So, how do you do it?</h2>
<p>Great question! It's thankfully not that hard, but the payoff is huge. The shift from my old, boring tooltip to my new, sexy one took only a couple of hours, thanks to a few <a href="https://stackoverflow.com/questions/43904643/add-chart-to-tooltip-in-d3" rel="nofollow noopener noreferrer" target="_blank">Stack Overflow answers</a> and <a href="https://bl.ocks.org/maelafifi/ee7fecf90bb5060d5f9a7551271f4397" rel="nofollow noopener noreferrer" target="_blank">online examples</a>.</p>
<h3 id="step-1-load-d3-tip"><a href="#step-1-load-d3-tip" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 1: Load <code>d3-tip</code></h3>
<p>The process mostly relies on <code>d3-tip</code>, which you can learn more about <a href="http://labratrevenge.com/d3-tip/" rel="nofollow noopener noreferrer" target="_blank">here</a>.</p>
<p>You can load <code>d3-tip</code> with the following code:</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre></div>
<h3 id="step-2-create-a-tooltip-object"><a href="#step-2-create-a-tooltip-object" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 2: Create a tooltip object</h3>
<p>Next, you initialize your tooltip, give it a class (for CSS styling), and provide the specified <code>offset</code>. In my example, I define my offset according to the <a href="https://stackoverflow.com/questions/28536367/in-d3-js-how-to-adjust-tooltip-up-and-down-based-on-the-screen-position" rel="nofollow noopener noreferrer" target="_blank">user's mouse position</a>. That way, if a user hovers over an eastern state, the tooltip doesn't disappear off the screen!</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token comment">// Define the tooltip</span>
<span class="token keyword">var</span> tool_tip <span class="token operator">=</span> d3
  <span class="token punctuation">.</span><span class="token method function property-access">tip</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"d3-tip"</span><span class="token punctuation">)</span>
  <span class="token comment">// If the mouse position is greater beyond ~ Kentucky/Missouri,</span>
  <span class="token comment">// Offset tooltip left instead of right</span>
  <span class="token punctuation">.</span><span class="token method function property-access">offset</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>current_position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">650</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Input the title, and include the div with an id of #tipDiv</span>
  <span class="token punctuation">.</span><span class="token method function property-access">html</span><span class="token punctuation">(</span><span class="token string">"&lt;p>Opioid-involved deaths over time in&lt;/p>&lt;div id='tipDiv'>&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Call it as a function to our app-wide SVG</span>
svg<span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span>tool_tip<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>The most important part here is</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token punctuation">.</span><span class="token method function property-access">html</span><span class="token punctuation">(</span>
  <span class="token string">"&lt;p>Opioid-involved deaths over time in&lt;/p>&lt;div id='tipDiv'>&lt;/div>"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>where we define the html that creates the tooltip itself. In our case, we provide a title, "Opioid-involved deaths over time", and also specify the div that the tooltip should include.</p>
<h3 id="step-3-create-the-tipdiv-object"><a href="#step-3-create-the-tipdiv-object" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 3: Create the <code>tipDiv</code> object</h3>
<p>Finally, we can create the <code>tipDiv</code> object we referenced in the above code. The object will be created on mouseover of the group of interest (in my case, states). Our code will look something like this (don't worry too much about it, I'll explain step by step below):</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code>states <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"g"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"states"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">selectAll</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">data</span><span class="token punctuation">(</span>topojson<span class="token punctuation">.</span><span class="token method function property-access">feature</span><span class="token punctuation">(</span>us<span class="token punctuation">,</span> us<span class="token punctuation">.</span><span class="token property-access">objects</span><span class="token punctuation">.</span><span class="token property-access">states</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">features</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Define and store the mouse position;</span>
    <span class="token comment">// This is used to define tooltip offset, seen above</span>
    current_position <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token method function property-access">mouse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Record current state</span>
    current_state <span class="token operator">=</span> nameById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span>

    <span class="token comment">// Show the tooltip</span>
    tool_tip<span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ... Continued below</span>
</code></pre></div>
<p>After that initialization and <code>show</code> function, we can define the <code>tipDiv</code> object:</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token comment">// ... Continued from above</span>
<span class="token comment">// Select the #tipDiv element, and appends an SVG (this is the tooltip)</span>
<span class="token keyword">var</span> tipSVG <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token method function property-access">select</span><span class="token punctuation">(</span><span class="token string">"#tipDiv"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"svg"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Apply the same logic you would to a regular chart, </span>
<span class="token comment">// but append it to our tipSVG</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">datum</span><span class="token punctuation">(</span>overdoses<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword control-flow">return</span> nameById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">==</span> current_state<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"stroke"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword control-flow">return</span> <span class="token string">"grey"</span>
        <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token function">color</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"stroke-width"</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"fill"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span>

<span class="token comment">// Same as above (this is the circle at the end of the line)</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"circle"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"fill"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword control-flow">return</span> <span class="token string">"grey"</span>
        <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token function">color</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"stroke"</span><span class="token punctuation">,</span> <span class="token string">"black"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"cx"</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"cy"</span><span class="token punctuation">,</span> <span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// Tooltip labelling on last value</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">text</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" deaths"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token number">10</span> <span class="token punctuation">}</span>
            <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Same as above</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">text</span><span class="token punctuation">(</span><span class="token string">"per 100,000"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token number">24</span> <span class="token punctuation">}</span>
            <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// State name</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">text</span><span class="token punctuation">(</span>current_state<span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"font-size"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"font-weight"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">// On mouseout, hide the tooltip</span>
<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> tool_tip<span class="token punctuation">.</span><span class="token property-access">hide</span><span class="token punctuation">)</span>
</code></pre></div>
<p>What's happening here? Let's look at one piece at a time.</p>
<p><strong>First</strong>, we define the object and name it <code>tipSVG</code>. <code>tipSVG</code> selects <code>#tipDiv</code> (defined in our d3-tip) and appends an SVG. We also define the width and height of the tooltip.</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token keyword">var</span> tipSVG <span class="token operator">=</span> d3
  <span class="token punctuation">.</span><span class="token method function property-access">select</span><span class="token punctuation">(</span><span class="token string">"#tipDiv"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"svg"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"height"</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p><strong>Next</strong>, we append a path to that SVG. This could be a circle, or a rectangle, or any other appendable shape. Because I am drawing a simple line, we use <code>path</code>.</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code>tipSVG
  <span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">datum</span><span class="token punctuation">(</span>
    overdoses<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> nameById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">==</span> current_state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"stroke"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token string">"grey"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token function">color</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"stroke-width"</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"fill"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>In defining the <code>d</code> attribute, you see I reference <code>line</code>. This is a function defined earlier in my code to return the <code>x</code> and <code>y</code> position of each data point, to create the path itself, as you can see below:</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token keyword">var</span> x_tooltip <span class="token operator">=</span> d3
  <span class="token punctuation">.</span><span class="token method function property-access">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>
    d3<span class="token punctuation">.</span><span class="token method function property-access">extent</span><span class="token punctuation">(</span>overdoses<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> d<span class="token punctuation">.</span><span class="token property-access">year</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> y_tooltip <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token method function property-access">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> line <span class="token operator">=</span> d3
  <span class="token punctuation">.</span><span class="token method function property-access">line</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">x</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token function">x_tooltip</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token property-access">year</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">y</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token function">y_tooltip</span><span class="token punctuation">(</span><span class="token operator">+</span>d<span class="token punctuation">.</span><span class="token property-access">rate</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="p-4 my-3 info-box" data-v-66ffdc8b><div data-v-66ffdc8b>
<p data-v-66ffdc8b>Because the tooltip contains its own chart with a predefined with and height, we need to provide scale functions as we would in a normal chart. We name this <code data-v-66ffdc8b>x_tooltip</code> and <code data-v-66ffdc8b>y_tooltip</code> so as to avoid confusion with our main scaling functions.</p>
  </div></div>
<p><strong>Lastly</strong>, we add a circle at the end of the line to signify the final data point. We also add the text label for the year 2017.</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token comment">// Final point</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"circle"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"fill"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">return</span> <span class="token string">"grey"</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token function">color</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"stroke"</span><span class="token punctuation">,</span> <span class="token string">"black"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"cx"</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"cy"</span><span class="token punctuation">,</span> <span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// Text label (##### deaths)</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">text</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" deaths"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token number">10</span> <span class="token punctuation">}</span>
        <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">7</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Per 100,00</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">text</span><span class="token punctuation">(</span><span class="token string">"per 100,000"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token number">24</span> <span class="token punctuation">}</span>
        <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token function">y_tooltip</span><span class="token punctuation">(</span>rateById<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// State name</span>
tipSVG<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">text</span><span class="token punctuation">(</span>current_state<span class="token punctuation">)</span> <span class="token comment">// Set in our mouseover function from earlier</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"font-size"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">"font-weight"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// End mouseover function</span>
</code></pre></div>
<p>And finally, we hide the tooltip on mouseout:</p>
<div class="nuxt-content-highlight"><pre class="language-js line-numbers"><code><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> tool_tip<span class="token punctuation">.</span><span class="token property-access">hide</span><span class="token punctuation">)</span>
</code></pre></div>
<h2 id="in-sum"><a href="#in-sum" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>In sum</h2>
<p>The process of appending a chart to your tooltip in a D3.js visualization is as simple as:</p>
<ol>
<li>Load <code>d3-tip</code> via a <code>&lt;script></code> tag</li>
<li>Create a tooltip object using <code>d3-tip</code>, which can be done easily upon consulting their documentation</li>
<li>Add an SVG element to the tooltip we created, as we would create a chart normally using D3 syntax</li>
</ol>
<p>Voila! You can find the code all in one place <a href="https://github.com/connorrothschild/D3.js/blob/master/map-overdoses/index.html" rel="nofollow noopener noreferrer" target="_blank">here</a>. Please note that I made this visualization early in my career, so I'm not particularly proud of the code ðŸ˜…</p>
<p>You can play around with the visualization and checkout the tooltip for yourself below (find the fullscreen version <a href="https://connorrothschild.github.io/D3.js/map-overdoses/" rel="nofollow noopener noreferrer" target="_blank">here</a>):</p>
<iframe title="Map of opioid-related overdoses, by state, between 1999 and 2017." src="https://connorrothschild.github.io/D3.js/map-overdoses/" width="100%" height="860px" style="background:#fff"></iframe></div> <hr> <div class="my-4"><a href="/post" class="subtitle has-text-weight-bolder is-size-5 link heading is-inline-block nuxt-link-active">ðŸ‘ˆ Back to all posts</a></div> <div class="columns"><div class="column"><div style="height:100%;transition:1s transform ease;transform:translateX(0) translateY(0)"><a href="/post/animate-hugo-academic"><article class="card card-fullheight has-background-semitransparent"><div class="card-image"><figure class="image is-2by1"><img src="//:0" alt="Blog post header image" class="v-lazy-image object-fit-cover" data-v-14ae8593></figure></div> <div class="card-content"><div class="content is-flex is-justify-content-space-evenly"><div class="has-text-centered"><p class="heading title is-size-6">Next post</p> <p class="has-text-weight-light title is-size-6">
                Animating Your Hugo Academic Site
              </p></div></div></div></article></a> <!----></div></div> <div class="column"><div style="height:100%;transition:1s transform ease;transform:translateX(0) translateY(0)"><a href="/post/economist-table-replication-using-reactable"><article class="card card-fullheight has-background-semitransparent"><div class="card-image"><figure class="image is-2by1"><img src="//:0" alt="Blog header image" class="v-lazy-image object-fit-cover" data-v-14ae8593></figure></div> <div class="card-content"><div class="content is-flex is-justify-content-space-evenly"><div class="has-text-centered"><p class="heading title is-size-6">Previous post</p> <p class="has-text-weight-light title is-size-6">
                Recreating a Table by The Economist Using Reactable
              </p></div></div></div></article></a> <!----></div></div></div></article> <footer class="site-footer" data-v-37cbb2b5><div class="content has-text-centered site-footer-content" data-v-37cbb2b5><p data-v-37cbb2b5>
      Built with ðŸ’š and Nuxt.js by
      <a href="https://twitter.com/CL_Rothschild" target="_blank" rel="noopener noreferrer" class="link" data-v-37cbb2b5>Connor Rothschild</a>. The source code is available on
      <a href="https://github.com/connorrothschild/v3" target="_blank" rel="noopener noreferrer" class="link" data-v-37cbb2b5>GitHub</a>.
    </p></div></footer></div></div></div></div><script defer src="/_nuxt/static/1639691221/post/adding-a-chart-to-your-d3-tooltip/state.js"></script><script src="/_nuxt/64b5898.js" defer></script><script src="/_nuxt/c4401d5.js" defer></script><script src="/_nuxt/2c17e43.js" defer></script><script src="/_nuxt/e8925e5.js" defer></script><script src="/_nuxt/ea1b2ed.js" defer></script><script src="/_nuxt/0dd4b09.js" defer></script><script src="/_nuxt/cbfb02f.js" defer></script><script src="/_nuxt/7e4b2d1.js" defer></script><script src="/_nuxt/2bd4311.js" defer></script>
  </body>
</html>
