<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Create Dumbbell Plots to Visualize Group Differences in R | Connor Rothschild</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="site"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="site"><meta data-n-head="ssr" data-hid="description" name="description" content="How to create dumbbell plots in R, using {ggalt}"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://v3.connorrothschild.com/post/dumbbell-plots"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="Create Dumbbell Plots to Visualize Group Differences in R"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="How to create dumbbell plots in R, using {ggalt}"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://v3.connorrothschild.com/post/dumbbell-plots/header.png"><meta data-n-head="ssr" data-hid="twitter:url" name="twitter:url" content="https://v3.connorrothschild.com/post/dumbbell-plots"><meta data-n-head="ssr" data-hid="twitter:title" name="twitter:title" content="Create Dumbbell Plots to Visualize Group Differences in R"><meta data-n-head="ssr" data-hid="twitter:description" name="twitter:description" content="How to create dumbbell plots in R, using {ggalt}"><meta data-n-head="ssr" data-hid="twitter:image" name="twitter:image" content="https://v3.connorrothschild.com/post/dumbbell-plots/header.png"><meta data-n-head="ssr" data-hid="twitter:site" name="twitter:site" content="@CL_Rothschild"><meta data-n-head="ssr" data-hid="twitter:card" name="twitter:card" content="summary_large_image"><meta data-n-head="ssr" property="article:published_time" content="2021-12-16T21:41:20.782Z"><meta data-n-head="ssr" property="article:modified_time" content="2021-12-16T21:41:20.782Z"><meta data-n-head="ssr" name="twitter:label1" content="Written by"><meta data-n-head="ssr" name="twitter:data1" content="Connor Rothschild"><base href="/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.png"><link data-n-head="ssr" data-hid="shortcut-icon" rel="shortcut icon" href="/_nuxt/icons/icon_64x64.ecd1ba.png"><link data-n-head="ssr" data-hid="apple-touch-icon" rel="apple-touch-icon" href="/_nuxt/icons/icon_512x512.ecd1ba.png" sizes="512x512"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.d23946e6.json" data-hid="manifest"><link data-n-head="ssr" data-hid="canonical" rel="canonical" href="https://v3.connorrothschild.com/post/dumbbell-plots"><link rel="preload" href="/_nuxt/64b5898.js" as="script"><link rel="preload" href="/_nuxt/cbfb02f.js" as="script"><link rel="preload" href="/_nuxt/css/0e51f67.css" as="style"><link rel="preload" href="/_nuxt/7e4b2d1.js" as="script"><link rel="preload" href="/_nuxt/css/2510a47.css" as="style"><link rel="preload" href="/_nuxt/2bd4311.js" as="script"><link rel="preload" href="/_nuxt/css/2d74e3a.css" as="style"><link rel="preload" href="/_nuxt/c4401d5.js" as="script"><link rel="preload" href="/_nuxt/2c17e43.js" as="script"><link rel="preload" href="/_nuxt/css/ff4f90e.css" as="style"><link rel="preload" href="/_nuxt/e8925e5.js" as="script"><link rel="preload" href="/_nuxt/css/2cc613b.css" as="style"><link rel="preload" href="/_nuxt/ea1b2ed.js" as="script"><link rel="stylesheet" href="/_nuxt/css/0e51f67.css"><link rel="stylesheet" href="/_nuxt/css/2510a47.css"><link rel="stylesheet" href="/_nuxt/css/2d74e3a.css"><link rel="stylesheet" href="/_nuxt/css/ff4f90e.css"><link rel="stylesheet" href="/_nuxt/css/2cc613b.css"><link rel="preload" href="/_nuxt/static/1639691221/post/dumbbell-plots/state.js" as="script"><link rel="preload" href="/_nuxt/static/1639691221/post/dumbbell-plots/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1639691221/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="theme-primary-off"><nav role="navigation" aria-label="main navigation" class="navbar theme-primary" data-v-577d5465><div class="navbar-brand" data-v-577d5465><a href="/" class="navbar-item has-text-weight-boldest nuxt-link-active" data-v-577d5465>Connor Rothschild
    </a> <a role="button" aria-label="menu" aria-expanded="false" data-target="navbarID" class="navbar-burger" data-v-577d5465><span aria-hidden="true" data-v-577d5465></span> <span aria-hidden="true" data-v-577d5465></span> <span aria-hidden="true" data-v-577d5465></span></a></div> <div id="navbarID" class="navbar-menu" data-v-577d5465><div class="navbar-end" data-v-577d5465><div class="navbar-item" data-v-577d5465><div class="themepicker__btn" data-v-15133967 data-v-577d5465><span class="themepicker__palette" data-v-15133967><span class="themepicker__swatch themepicker__swatch--primary" data-v-15133967></span> <span class="themepicker__swatch themepicker__swatch--secondary" data-v-15133967></span> <span class="themepicker__swatch themepicker__swatch--text" data-v-15133967></span></span></div></div> <a href="/#projects" class="navbar-item" data-v-577d5465>
        Projects
      </a> <a href="/#awards" class="navbar-item" data-v-577d5465>
        Awards
      </a> <a href="/#blog" class="navbar-item" data-v-577d5465>
        Blog
      </a> <a href="mailto:connor@connorrothschild.com" class="navbar-item" data-v-577d5465>
        Email
      </a> <a href="https://docs.google.com/document/d/1qBH-wNMe2nv9Xa4uzHZ5wBevohwKuB3h2i9M2yk4POk/edit?usp=sharing" target="_blank" rel="noopener" class="navbar-item" data-v-577d5465>
        Resume
      </a></div></div></nav> <article class="section container is-max-tablet"><h1 class="my-3 has-text-weight-boldest content-title is-size-3-mobile">
      Create Dumbbell Plots to Visualize Group Differences in R
    </h1> <p class="my-3 content-description is-size-5-mobile">
      How to create dumbbell plots in R, using {ggalt}
    </p> <p class="heading is-size-6 has-text-weight-light">
      March 2020 ‚Ä¢
      <span>11 minute read
  <!----></span></p> <hr> <div class="nuxt-content"><div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/a9b46d2.jpg" alt="A dumbbell plot depicting in-group differences between Republicans and Democrats' worry about the Coronavirus. It shows that Republicans are less worried than Democrats. The question text survey respondents answered is 'How concerned are you that you or someone you know will be infected with the Coronavirus?'" data-v-bbcfffec></div>
<p>As of this writing, nearly <a href="https://www.worldometers.info/coronavirus/coronavirus-death-toll/" rel="nofollow noopener noreferrer" target="_blank">6000</a> people have died of COVID-19 and another <a href="https://www.worldometers.info/coronavirus/coronavirus-death-toll/" rel="nofollow noopener noreferrer" target="_blank">150,000</a> have been infected. All signs seem to show that the virus is only growing.</p>
<p>But some groups are less worried about COVID-19 than others. Recent <a href="https://poll.qu.edu/national/release-detail?ReleaseID=3657#.XmaSrM7okEs.twitter" rel="nofollow noopener noreferrer" target="_blank">polling</a> from Quinnipiac University suggests that worries about the coronavirus are related to one‚Äôs partisan identity, age, and race.</p>
<p>Let‚Äôs visualize that to see just how stark the differences are. I use dumbbell dot plots because they‚Äôre some of the most powerful tools for visualizing differences between two groups (e.g. Republicans and Democrats).</p>
<h2 id="political-affiliation"><a href="#political-affiliation" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Political Affiliation</h2>
<p>Republicans tend to be significantly less worried about coronavirus than Democrats. This is true in two regards. First, with respect to <em>concern for becoming infected</em>:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/a9b46d2.jpg" alt="A dumbbell plot depicting in-group differences between Republicans and Democrats' worry about the Coronavirus. It shows that Republicans are less worried than Democrats. The question text survey respondents answered is 'How concerned are you that you or someone you know will be infected with the Coronavirus?'" data-v-bbcfffec></div>
<p>It‚Äôs also true when we look at concern than COVID-19 will <em>disrupt an individual‚Äôs life</em>:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/4e3f576.jpg" alt="A dumbbell plot depicting in-group differences between Republicans and Democrats' worry about the Coronavirus. It shows that Republicans are less worried than Democrats. The question text survey respondents answered is 'How concerned are you that the coronavirus will disrupt your daily life?'" data-v-bbcfffec></div>
<p>Looking at the first plot, we notice that Republicans are <strong>3x more likely</strong> than Democrats to say that they are ‚Äônot concerned at all‚Äô by the prospect of coronavirus infecting them or someone they know. By contrast, Democrats are nearly <strong>3x as likely</strong> as Republicans to say that they are ‚Äòvery concerned‚Äô by the same risk.</p>
<p>The second plot shows us similar trends for fears of disruption: 3 in 4 Democrats are concerned (very or somewhat) that COVID-19 will disrupt their daily lives, compared to only 38% of Republicans. While 26% of Democrats are not worried about disruption, the same is true for 61% of Republicans.</p>
<h2 id="age"><a href="#age" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Age</h2>
<p>There is also a relationship between age and fears related to the coronavirus.</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/17d5503.jpg" alt="A dumbbell plot depicting in-group differences between different age groups' worry about the Coronavirus. It shows that older respondents are more concerned than younger ones. The question text survey respondents answered is 'How concerned are you that you or someone you know will be infected with the Coronavirus?'" data-v-bbcfffec></div>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/c9f5f31.jpg" alt="A dumbbell plot depicting in-group differences between different age groups' worry about the Coronavirus. It shows that older respondents are more concerned than younger ones. The question text survey respondents answered is 'How concerned are you that you or someone you know will be infected with the Coronavirus?'" data-v-bbcfffec></div>
<p>These plots show that there are significant differences in worry by age, but that fears of disruption are felt more universally than fears of infection. The first plot shows that <em>every age group</em> fears that COVID-19 will disrupt their daily lives; although younger people express this sentiment less frequently. The second plot <strong>the majority of people under age 50 are unconcerned by the prospect of COVID-19 infection</strong>. The opposite is true for older respondents; those aged 65 years and old are <strong>significantly</strong> more likely to be concerned by the risk of infection (62% vs 37%).</p>
<h2 id="why-dumbbell-plots"><a href="#why-dumbbell-plots" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Why Dumbbell Plots?</h2>
<p>Dumbbell plots are an alternative to grouped barcharts. Like barcharts, they show differences between populations and they more powerfully represent the <em>distances between two groups</em>. They are frequently used by survey research firms such as the Pew Research Center, as seen in this <a href="https://twitter.com/pewresearch/status/1238345807348334593/photo/1" rel="nofollow noopener noreferrer" target="_blank">example</a>:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/ca44e45.jpg" alt="A dumbbell plot from the Pew Research Center, showcasing perceived importance of US military bases by the age of the respondent; older folks think overseas bases are more important." data-v-bbcfffec></div>
<p>While a barchart would require eight bars to visualize each datapoint above, a dumbbell dot plot shows eight dots <em>on four lines</em>, reducing clutter and emphasizing the differences <em>between groups</em>.</p>
<p>Here‚Äôs another example, this time from <a href="https://www.axios.com/trumps-disapproval-rate-is-up-in-every-state-2495232720.html?utm_source=twitter&utm_medium=social&utm_campaign=organic&utm_content=infographic&utm_term=politics" rel="nofollow noopener noreferrer" target="_blank">Axios</a> (visualizing changes in presidential disapproval between January and October 2017):</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/d080613.jpg" alt="A dumbbell plot from Axios, which showcases changes in approval ratings between January and October 2017, by state. Most states have become more disapproving of the President." data-v-bbcfffec></div>
<p>This pseudo-dumbbell plot (dumbbells with weird endpoints; don‚Äôt pick up that side!) has 50 ‚Äògroups‚Äô (US states), but only two <em>outcomes</em> (January and October). A dumbbell plot is <em>far</em> superior to a grouped bar chart in this case because it emphasizes the difference is between two periods of time, and it does so with fewer objects (50 lines rather than 100 bars) than a barchart would use.</p>
<p>One key lesson from the examples above: If the <em>comparison</em> of interest is between two groups (e.g. Republicans and Democrats), or if the <em>outcome</em> of interest is two-fold (e.g. ‚Äòconcerned‚Äô and ‚Äònot concerned‚Äô), dot plots are a superior way to visualize your data.</p>
<h2 id="lets-make-it-in-r"><a href="#lets-make-it-in-r" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Let‚Äôs Make It In R!</h2>
<p>Now it's time to make your own dumbbell dot plot. We‚Äôll be creating this viz:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/a9b46d2.jpg" alt="A dumbbell plot depicting in-group differences between Republicans and Democrats' worry about the Coronavirus. It shows that Republicans are less worried than Democrats. The question text survey respondents answered is 'How concerned are you that you or someone you know will be infected with the Coronavirus?'" data-v-bbcfffec></div>
<p>For reference, the data I‚Äôm using looks like this:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/4e3f576.jpg" alt="A dumbbell plot depicting in-group differences between Republicans and Democrats' worry about the Coronavirus. It shows that Republicans are less worried than Democrats. The question text survey respondents answered is 'How concerned are you that the coronavirus will disrupt your daily life?'" data-v-bbcfffec></div>
<p>Pretty simple, right? <a href="https://poll.qu.edu/national/release-detail?ReleaseID=3657#.XmaSrM7okEs.twitter" rel="nofollow noopener noreferrer" target="_blank">It comes from here, by the way.</a></p>
<p>The process relies on Bob Rudis‚Äôs <code>ggalt</code> package and the <code>geom_dumbbell</code> function, which does most of the heavy lifting. This tutorial is mostly a step-by-step recreation of Rudis‚Äôs code <a href="https://rud.is/b/2016/04/17/ggplot2-exercising-with-ggalt-dumbbells/" rel="nofollow noopener noreferrer" target="_blank">found here</a>.</p>
<p>For convenience, let's define a few things before we get started:</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>blue <span class="token operator">&lt;-</span> <span class="token string">"#0171CE"</span>
red <span class="token operator">&lt;-</span> <span class="token string">"#DE4433"</span>
</code></pre></div>
<p>In addition to the colors, we create a hack-y function which allows us to selectively label points (thanks to Bob Rudis for <a href="https://rud.is/b/2016/04/17/ggplot2-exercising-with-ggalt-dumbbells/" rel="nofollow noopener noreferrer" target="_blank">this</a>, again):</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>percent_first <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">&lt;-</span> sprintf<span class="token punctuation">(</span><span class="token string">"%d%%"</span><span class="token punctuation">,</span> round<span class="token punctuation">(</span>x<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  x<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">:</span>length<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> sub<span class="token punctuation">(</span><span class="token string">"%$"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">:</span>length<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  x
<span class="token punctuation">}</span>
</code></pre></div>
<h3 id="step-1-barebones"><a href="#step-1-barebones" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 1: Barebones</h3>
<p>We begin with a basic <code>ggplot</code> object. In <code>geom_segment</code>, we define the pseudo-grid lines (one for each ‚Äòlevel‚Äô of concern).</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>library<span class="token punctuation">(</span>ggplot2<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>ggalt<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>tidyverse<span class="token punctuation">)</span>

ggplot<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_segment<span class="token punctuation">(</span>data<span class="token operator">=</span>infected<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> yend<span class="token operator">=</span>concerned<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xend<span class="token operator">=</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               color<span class="token operator">=</span><span class="token string">"#b2b2b2"</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">0.15</span><span class="token punctuation">)</span>
</code></pre></div>
<p>Here, <code>geom_segment</code> creates grey lines with a size of 0.15. The lines span from 0 to 0.5. This changes according to your data; because the largest number we are dealing with is .43 (representing 43% of Democrats), our bound on the right side can be 0.5; this also leaves room for the difference column which we create later.</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/043a2b7.jpg" alt="A blank canvas with only plot bounds." data-v-bbcfffec></div>
<p>Then, <code>geom_dumbbell</code> reads in our data and creates the dumbbells: we specify the <em>beginning</em> (<code>x</code>) of each dumbbell to represent Republicans and the <em>end</em> (<code>xend</code>) to correspond to Democrats. Other specifications affect the accompanying line and points.</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>geom_dumbbell<span class="token punctuation">(</span>data<span class="token operator">=</span>infected<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> x<span class="token operator">=</span>rep<span class="token punctuation">,</span> xend<span class="token operator">=</span>dem<span class="token punctuation">)</span><span class="token punctuation">,</span>
                           size<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"#b2b2b2"</span><span class="token punctuation">,</span> size_x<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> size_xend <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
                           colour_x <span class="token operator">=</span> red<span class="token punctuation">,</span> colour_xend <span class="token operator">=</span> blue<span class="token punctuation">)</span>
</code></pre></div>
<p>That code creates the following plot:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/a0a47a6.jpg" alt="Four lines appear, each corresponding to the level of concern. The end of each line (signified with a blue or red dot) represents Democrats' and Republicans' level of concern. The x axis is percentage of respondents." data-v-bbcfffec></div>
<p>Already, we can begin to see the barebones for the finished version: each dumbbell represents a level of concern, and visualizes Republicans and Democrats‚Äô proportions for that level.</p>
<h3 id="step-2-labels"><a href="#step-2-labels" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 2: Labels</h3>
<p>The next step is creating the ‚ÄúRepublican‚Äù and ‚ÄúDemocrat‚Äù labels (in case colors aren‚Äôt enough, or the image is seen in black and white!).</p>
<p>We can create labels with the following code:</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>geom_text<span class="token punctuation">(</span>data<span class="token operator">=</span>filter<span class="token punctuation">(</span>infected<span class="token punctuation">,</span> concerned<span class="token operator">==</span><span class="token string">"Very concerned"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          aes<span class="token punctuation">(</span>x<span class="token operator">=</span>dem<span class="token punctuation">,</span> y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Democrats"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          color<span class="token operator">=</span>blue<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> vjust<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1.5</span><span class="token punctuation">,</span> fontface<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">"Lato"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
geom_text<span class="token punctuation">(</span>data<span class="token operator">=</span>filter<span class="token punctuation">(</span>infected<span class="token punctuation">,</span> concerned<span class="token operator">==</span><span class="token string">"Very concerned"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          aes<span class="token punctuation">(</span>x<span class="token operator">=</span>rep<span class="token punctuation">,</span> y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Republicans"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          color<span class="token operator">=</span>red<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> vjust<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1.5</span><span class="token punctuation">,</span> fontface<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">"Lato"</span><span class="token punctuation">)</span>
</code></pre></div>
<p>This code is hopefully quite intuitive. Since we are only showing the labels once, we specify a filter in the <code>data</code> argument of <code>geom_text</code>. If we instead wanted to show the labels for only the bottom level of concern, we would specify <code>data=filter(infected, concerned=="Not concerned at all‚Äù)</code>.</p>
<p>We label each point at its respective political affiliation, and we specify color according to the point color. The rest is just minor beautification for the text.</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/c3a3d28.jpg" alt="In addition to the prior plot, there are now labels appended for each party." data-v-bbcfffec></div>
<p>We also have to add direct labels for values, so that the exact percentages for each group are clear:</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>geom_text<span class="token punctuation">(</span>data<span class="token operator">=</span>infected<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>x<span class="token operator">=</span>rep<span class="token punctuation">,</span> y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> label<span class="token operator">=</span>percent_first<span class="token punctuation">(</span>rep<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          color<span class="token operator">=</span>red<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">2.75</span><span class="token punctuation">,</span> vjust<span class="token operator">=</span><span class="token number">2.5</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">"Lato"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
geom_text<span class="token punctuation">(</span>data<span class="token operator">=</span>infected<span class="token punctuation">,</span> color<span class="token operator">=</span>blue<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">2.75</span><span class="token punctuation">,</span> vjust<span class="token operator">=</span><span class="token number">2.5</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">"Lato"</span><span class="token punctuation">,</span>
          aes<span class="token punctuation">(</span>x<span class="token operator">=</span>dem<span class="token punctuation">,</span> y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> label<span class="token operator">=</span>percent_first<span class="token punctuation">(</span>dem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div>
<p>Here, we utilize the function <code>percent_first</code> we defined earlier, because we only want percentages to appear on the first numbers (to reduce clutter). The rest of the labels are just numbers which represent percentages. The syntax here is simple syntax that should be familiar to <code>ggplot</code> users. It creates this output:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/c7cd1a8.jpg" alt="In addition to the prior plot, there are now direct labels for the percent of respondents represented by each point." data-v-bbcfffec></div>
<h3 id="step-3-a-differences-column"><a href="#step-3-a-differences-column" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 3: A Differences Column</h3>
<p>Finally, we want to help our viewers see <em>how stark</em> the differences between Democrats and Republicans really is. We do so with a differences column.</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>geom_rect<span class="token punctuation">(</span>data<span class="token operator">=</span>infected<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>xmin<span class="token operator">=</span><span class="token number">.5</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">.6</span><span class="token punctuation">,</span> ymin<span class="token operator">=</span><span class="token operator">-</span><span class="token number">Inf</span><span class="token punctuation">,</span> ymax<span class="token operator">=</span><span class="token number">Inf</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fill<span class="token operator">=</span><span class="token string">"grey"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
geom_text<span class="token punctuation">(</span>data<span class="token operator">=</span>infected<span class="token punctuation">,</span> aes<span class="token punctuation">(</span>label<span class="token operator">=</span>paste0<span class="token punctuation">(</span>diff<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">.55</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontface<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">"Lato"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
geom_text<span class="token punctuation">(</span>data<span class="token operator">=</span>filter<span class="token punctuation">(</span>infected<span class="token punctuation">,</span> concerned<span class="token operator">==</span><span class="token string">"Very concerned"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            aes<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">.55</span><span class="token punctuation">,</span> y<span class="token operator">=</span>concerned<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"Difference"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            color<span class="token operator">=</span><span class="token string">"black"</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">3.1</span><span class="token punctuation">,</span> vjust<span class="token operator">=</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> fontface<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">,</span> family<span class="token operator">=</span><span class="token string">"Lato"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
scale_x_continuous<span class="token punctuation">(</span>expand<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> limits<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">.625</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
scale_y_discrete<span class="token punctuation">(</span>expand<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div>
<p>Here, we first create a grey rectangle with <code>geom_rect</code>. It spans the entire chart vertically, hence why <code>ymin</code> and <code>ymax</code> range from negative to positive infinity. Next, we create labels according to the differences column. We position each of them according to the degree of concern (our y-axis). Finally, we expand the bounds of the chart so its a bit prettier:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/f6a1317.jpg" alt="In addition to the prior plot, there is now a 'differences' column which has the difference between Republican and Democrat proportions added as a percent." data-v-bbcfffec></div>
<h3 id="step-4-titles-labels--captions"><a href="#step-4-titles-labels--captions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 4: Titles, Labels & Captions</h3>
<p>Finally, let‚Äôs add our title, subtitle, caption, and axis labels:</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>labs<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token keyword">NULL</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token keyword">NULL</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">"Republicans are less worried about COVID-19"</span><span class="token punctuation">,</span>
       subtitle<span class="token operator">=</span>"How concerned are you that you or someone
                                 you know will be infected with the coronavirus?"<span class="token punctuation">,</span>
       caption<span class="token operator">=</span>"Source<span class="token operator">:</span> Quinnipiac University Poll<span class="token punctuation">,</span> March <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">2020.</span> Q27
                                \n\nDesign<span class="token operator">:</span> Connor Rothschild"<span class="token punctuation">)</span>
</code></pre></div>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/d112395.jpg" alt="In addition to the prior plot, there are now axis labels and a title." data-v-bbcfffec></div>
<p>That‚Äôs our plot! Too bad its kinda ugly. Let‚Äôs fix that in our final step.</p>
<h3 id="step-5-beautification"><a href="#step-5-beautification" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 5: Beautification</h3>
<p>Beautification occurs using the <code>theme</code> argument.</p>
<div class="nuxt-content-highlight"><pre class="language-r line-numbers"><code>theme_bw<span class="token punctuation">(</span>base_family<span class="token operator">=</span><span class="token string">"Lato"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
theme<span class="token punctuation">(</span>
  panel.grid.major<span class="token operator">=</span>element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  panel.grid.minor<span class="token operator">=</span>element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  panel.border<span class="token operator">=</span>element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  axis.ticks<span class="token operator">=</span>element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  axis.text.x<span class="token operator">=</span>element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  plot.title<span class="token operator">=</span>element_text<span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">,</span> face<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  plot.title.position <span class="token operator">=</span> <span class="token string">"plot"</span><span class="token punctuation">,</span>
  plot.subtitle<span class="token operator">=</span>element_text<span class="token punctuation">(</span>face<span class="token operator">=</span><span class="token string">"italic"</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> margin<span class="token operator">=</span>margin<span class="token punctuation">(</span>b<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  plot.caption<span class="token operator">=</span>element_text<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> margin<span class="token operator">=</span>margin<span class="token punctuation">(</span>t<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"#7a7d7e"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div>
<p>After specifying our base <code>ggplot</code> theme, <code>theme_bw</code>, we use <code>theme()</code> to specify a whole host of arguments.</p>
<p>To simplify, the above code:</p>
<ul>
<li>Removes grid lines (<code>panel.grid.major</code>, <code>panel.grid.minor</code>)</li>
<li>Removes the panel border (<code>panel.border</code>)</li>
<li>Removes axis ticks and axis text (<code>axis.ticks</code>, <code>axis.text.x</code>)</li>
<li>Positions the axis plot, subtitle, and caption, and styles them as well (<code>plot.title</code>, <code>plot.title.position</code>,<code>plot.subtitle</code>,<code>plot.caption</code>).</li>
</ul>
<p>Our final output:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/a9b46d2.jpg" alt="Stylization is added to the chart. There is now a white background, Lato font, and better typography rules are followed." data-v-bbcfffec></div>
<h2 id="to-summarize"><a href="#to-summarize" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>To Summarize</h2>
<p>Our process looked like this:</p>
<div class="img" style="display:inline-block;width:100%" data-v-bbcfffec><img src="/_nuxt/img/8aad7e3.gif" alt="A GIF showcasing the prior six steps outlined in this blog post; the GIF shows the chart going from a blank canvas to a full visual." data-v-bbcfffec></div>
<p>The code for the above visualizations, as well as the underlying datasets and outputs, can be found <a href="https://github.com/connorrothschild/R/tree/master/covid" rel="nofollow noopener noreferrer" target="_blank">here</a>.</p>
<p>Thanks for reading!</p></div> <hr> <div class="my-4"><a href="/post" class="subtitle has-text-weight-bolder is-size-5 link heading is-inline-block nuxt-link-active">üëà Back to all posts</a></div> <div class="columns"><div class="column"><div style="height:100%;transition:1s transform ease;transform:translateX(0) translateY(0)"><a href="/post/economist-table-replication-using-reactable"><article class="card card-fullheight has-background-semitransparent"><div class="card-image"><figure class="image is-2by1"><img src="//:0" alt="Blog header image" class="v-lazy-image object-fit-cover" data-v-14ae8593></figure></div> <div class="card-content"><div class="content is-flex is-justify-content-space-evenly"><div class="has-text-centered"><p class="heading title is-size-6">Next post</p> <p class="has-text-weight-light title is-size-6">
                Recreating a Table by The Economist Using Reactable
              </p></div></div></div></article></a> <!----></div></div> <div class="column"><div style="height:100%;transition:1s transform ease;transform:translateX(0) translateY(0)"><a href="/post/refugee-trends"><article class="card card-fullheight has-background-semitransparent"><div class="card-image"><figure class="image is-2by1"><img src="//:0" alt="Blog header image" class="v-lazy-image object-fit-cover" data-v-14ae8593></figure></div> <div class="card-content"><div class="content is-flex is-justify-content-space-evenly"><div class="has-text-centered"><p class="heading title is-size-6">Previous post</p> <p class="has-text-weight-light title is-size-6">
                Trends in Refugee Acceptance, 2002 to 2019
              </p></div></div></div></article></a> <!----></div></div></div></article> <footer class="site-footer" data-v-37cbb2b5><div class="content has-text-centered site-footer-content" data-v-37cbb2b5><p data-v-37cbb2b5>
      Built with üíö and Nuxt.js by
      <a href="https://twitter.com/CL_Rothschild" target="_blank" rel="noopener noreferrer" class="link" data-v-37cbb2b5>Connor Rothschild</a>. The source code is available on
      <a href="https://github.com/connorrothschild/v3" target="_blank" rel="noopener noreferrer" class="link" data-v-37cbb2b5>GitHub</a>.
    </p></div></footer></div></div></div></div><script defer src="/_nuxt/static/1639691221/post/dumbbell-plots/state.js"></script><script src="/_nuxt/64b5898.js" defer></script><script src="/_nuxt/c4401d5.js" defer></script><script src="/_nuxt/2c17e43.js" defer></script><script src="/_nuxt/e8925e5.js" defer></script><script src="/_nuxt/ea1b2ed.js" defer></script><script src="/_nuxt/cbfb02f.js" defer></script><script src="/_nuxt/7e4b2d1.js" defer></script><script src="/_nuxt/2bd4311.js" defer></script>
  </body>
</html>
